<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>C·∫ßu h√¥n</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: black;
        color: white;
        font-family: sans-serif;
        text-align: center;
      }

      .message {
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 2em;
        z-index: 10;
        opacity: 0;
        transition: opacity 1s;
      }

      .question {
        display: none;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 2em;
        z-index: 10;
      }

      .buttons {
        margin-top: 20px;
      }

      button {
        padding: 10px 20px;
        font-size: 1.2em;
        margin: 0 10px;
        cursor: pointer;
      }

      .falling {
        position: absolute;
        top: -100px;
        width: 200px;
        height: 200px;
        object-fit: cover;
        animation: fall linear;
        border-radius: 6px;
      }
      @keyframes fall {
        from {
          transform: translateY(-100px);
        }
        to {
          transform: translateY(110vh);
        }
      }

      .cat-video {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: black;
        z-index: 30;
        align-items: center;
        justify-content: center;
      }
      .cat-video video {
        max-width: 100%;
        max-height: 100%;
      }

      .thankyou {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url("https://files.catbox.moe/v8ozjj.jpg") center/cover
          no-repeat;
        color: white;
        font-size: 3em;
        align-items: center;
        justify-content: center;
        text-shadow: 2px 2px 6px black;
        z-index: 20;
      }
    </style>
  </head>
  <body>
    <div class="message" id="message"></div>

    <div class="question">
      Em ƒë·ªìng √Ω l√†m v·ª£ anh ch·ª©? üíç
      <div class="buttons">
        <button id="yesBtn">ƒê·ªìng √Ω ‚ù§Ô∏è</button>
        <button id="noBtn">Kh√¥ng üò¢</button>
      </div>
    </div>

    <div class="cat-video" id="catVideo">
      <video
        id="introVideo"
        playsinline
        webkit-playsinline
        muted
        preload="auto"
      >
        <source src="kiss.mp4" type="video/mp4" />
      </video>
    </div>

    <div class="thankyou">C·∫£m ∆°n em! Anh y√™u em ‚ù§Ô∏è</div>

    <script>
      const images = [
        "assets/Image (1).jfif",
        "assets/Image (2).jfif",
        "assets/Image (3).jfif",
        "assets/Image (4).jfif",
        "assets/Image (5).jfif",
        "assets/Image (6).jfif",
        "assets/Image (7).jfif",
        "assets/Image (8).jfif",
        "assets/Image (9).jfif",
        "assets/Image (10).jfif",
        "assets/Image (11).jfif",
        "assets/Image (12).jfif",
        "assets/Image (13).jfif",
        "assets/Image (14).jfif",
        "assets/Image (15).jfif",
        "assets/Image (16).jfif",
        "assets/Image (17).jfif",
        "assets/Image (18).jfif",
        "assets/Image (19).jfif",
        "assets/Image (20).jfif",
        "assets/Image (21).jfif",
        "assets/Image (22).jfif",
        "assets/Image (23).jfif",
        "assets/Image (24).jfif",
        "assets/Image (25).jfif",
        "assets/Image (26).jfif",
        "assets/Image (27).jfif",
        "assets/Image (28).jfif",
        "assets/Image (29).jfif",
        "assets/Image (30).jfif",
        "assets/Image (31).jfif",
        "assets/Image (32).jfif",
        "assets/Image (33).jfif",
        "assets/Image (34).jfif",
        "assets/Image (35).jfif",
        "assets/Image (36).jfif",
        "assets/Image (37).jfif",
        "assets/Image (38).jfif",
        "assets/Image (39).jfif",
        "assets/Image (40).jfif",
        "assets/Image (41).jfif",
        "assets/Image.jfif",
      ];

      const numCols = 5; // chia m√†n h√¨nh th√†nh 8 c·ªôt
      const colWidth = window.innerWidth / numCols;
      const lastSpawnTime = new Array(numCols).fill(0);
      const minInterval = 4000; // ms, kho·∫£ng c√°ch t·ªëi thi·ªÉu gi·ªØa 2 h√¨nh c√πng 1 c·ªôt
      const fallDuration = 6000; // ms, t·ªëc ƒë·ªô r∆°i ƒë·ªìng nh·∫•t

      function spawnImage() {
        let col;
        let now = Date.now();

        // t√¨m c·ªôt h·ª£p l·ªá (ch∆∞a spawn g·∫ßn ƒë√¢y)
        do {
          col = Math.floor(Math.random() * numCols);
        } while (now - lastSpawnTime[col] < minInterval);

        lastSpawnTime[col] = now;

        const img = document.createElement("img");
        img.src = images[Math.floor(Math.random() * images.length)];
        img.className = "falling";
        img.style.left = col * colWidth + colWidth / 2 - 40 + "px"; // cƒÉn gi·ªØa c·ªôt
        img.style.animationDuration = fallDuration + "ms";

        document.body.appendChild(img);

        // remove sau khi r∆°i xong
        setTimeout(() => img.remove(), fallDuration);
      }

      setInterval(spawnImage, 1000); // spawn li√™n t·ª•c

      /* Th√¥ng ƒëi·ªáp l·∫ßn l∆∞·ª£t */
      const messages = [
        "He l√¥ em, l√† anh qu√†ng t·ª´ meo c·ªßa em ƒë√¢y",
        "Tr∆∞·ªõc ƒë√¢y, l√∫c ch∆∞a g·∫∑p em",
        "Cu·ªôc ƒë·ªùi anh ch·ªâ to√†n l√† drama v√† ti√™u c·ª±c",
        "T·ª´ ng√†y g·∫∑p ƒë∆∞·ª£c em, ƒë∆∞·ª£c tr·∫£i nghi·ªám v√† ƒëi nhi·ªÅu n∆°i c√πng em",
        "C√°c b·ª©c h√¨nh em ƒëang th·∫•y l√† nh·ªØng kho·∫£nh kh·∫Øc anh v√† em ƒë√£ c√πng nhau tr·∫£i qua",
        "ƒêo·∫°n ƒë∆∞·ªùng m√¨nh ƒëi c≈©ng ƒë·ªß d√†i r·ªìi, nh∆∞ng anh v·∫´n ƒë·ªÉ em ƒë·ª£i 1 happy ending",
        "Anh bi·∫øt ƒë·ªÉ em c√≥ c·∫£m gi√°c m√¨nh ph·∫£i ƒëi h·ªëi anh c·∫ßu h√¥n l√† kh√¥ng ƒë√∫ng",
        "Anh p√© xin l·ªói v√¨ ƒë√£ ƒë·ªÉ em ph·∫£i ch·ªù ƒë·ª£i",
        "Anh ch·ªâ mu·ªën m·ªôt ƒëi·ªÅu duy nh·∫•t...",
      ];
      let msgIndex = 0;
      const msgEl = document.getElementById("message");

      function showNextMessage() {
        if (msgIndex < messages.length) {
          msgEl.textContent = messages[msgIndex];
          msgEl.style.opacity = 1;
          setTimeout(() => {
            msgEl.style.opacity = 0;
            msgIndex++;
            setTimeout(showNextMessage, 1500);
          }, 2500);
        } else {
          document.querySelector(".question").style.display = "block";
        }
      }
      setTimeout(showNextMessage, 7000);

      /* N√∫t */
      const yesBtn = document.getElementById("yesBtn");
      const noBtn = document.getElementById("noBtn");
      const thankyou = document.querySelector(".thankyou");
      const catVideo = document.getElementById("catVideo");
      const catClip = document.getElementById("catClip");

      yesBtn.onclick = () => {
        document.querySelector(".question").style.display = "none";
        catVideo.style.display = "flex"; // show clip m√®o
        catClip.muted = false; // b·∫≠t ti·∫øng
        catClip.currentTime = 0; // tua l·∫°i t·ª´ ƒë·∫ßu
        catClip.play();
      };

      // khi clip m√®o k·∫øt th√∫c -> hi·ªán thankyou
      catClip.onended = () => {
        catVideo.style.display = "none";
        thankyou.style.display = "flex";
      };

      noBtn.onclick = () => {
        alert("Anh s·∫Ω ƒë·ª£i ƒë·∫øn khi em ƒë·ªïi √Ω üò¢");
      };
    </script>
  </body>
</html>
